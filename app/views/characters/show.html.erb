<h1><%= @character.handle %> (<%= @character.role.name %>)</h1>

<h2 class="inversed">Stats</h2>
<ul class="stats">
  <% (Character::BASIC_ATTRIBUTES).each do |stat| %>
  <li class="stat">
    <abbr title="<%= Character.human_attribute_name(stat).titleize %>" class="stat-name"><%= abbrivated_stats[stat] %></abbr>
    <span class="stat-value"><%= @character.send(stat) %></span>
  </li>
<% end %>
</ul>

<ul class="stats">
  <% %i[run leap lift carry humanity].each do |attribute| %>
  <li class="stat">
    <span class="stat-name"><%= Character.human_attribute_name(attribute) %></span>
    <span class="stat-value"><%= @character.send(attribute) %></span>
  </li>
  <% end %>
</ul>
<div class="clear"></div>

<h2 class="inversed">Skills</h2>
<% special_abilities = @character.skills.select { |s| s.value > 0 && s.special_ability } %>
<%= render partial: "skill_group", object: {"Special #{special_abilities.many? ? 'Abilities' : 'Ability'}" => special_abilities} %>
<% grouped_skills = @character.skills.reject { |s| s.value == 0 || s.special_ability }.group_by(&:stat) %>
<% (Character::BASIC_ATTRIBUTES).each do |category| %>
  <% next unless skills = grouped_skills.symbolize_keys[category] %>
  <%= render partial: "skill_group", object: {Character.human_attribute_name(category) => skills} %>
<% end %>

<%= link_to "edit", edit_character_path(@character) %>
